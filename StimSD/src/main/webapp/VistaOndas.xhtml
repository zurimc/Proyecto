<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:hf="http://highfaces.org">

<h:head>
<b:tabLinks  look="primary" title="Stim SD" icon="globe" iconAlign="right">
	    <b:navLink href="VistaOnda.xhtml" value="Potenciales"/>
	    <b:navLink href="TipoCuenta.xhtml" value="Usuarios"/>
	    <b:navLink href="hospitales.xhtml" value="Hospital"/>
	   	<b:navLink href="estimuladores.xhtml" value="Equipos"/>
	   	<b:navLink href="paciente.xhtml" value="Paciente"/>
	   	
	   	<h:form styleClass="navbar-form navbar-right" ></h:form>
	   		<h:form styleClass="navbar-form navbar-right" >
	     	<b:commandButton look="danger" value = "Cerrar " actionListener="#{gestiondeSeccionView.cerrarSesionUsuario}"  />
	    </h:form>
	   <h:form styleClass="navbar-form navbar-right" >
 		<b:dropButton value="Configuración"  inverse="true" look="info" >
				<b:navCommandLink value = "Señales" actionListener="#{potencialesAccion.vista_senales(1)}" >
				</b:navCommandLink>
		</b:dropButton>
		</h:form> 
</b:tabLinks>
<b:messages />
<div style="text-align: center">
 <br /> <br />
</div>
<title>Potenciales</title>
 <style type="text/css">
    .alineacion{
        margin:auto;
		align-items:center;
		padding: auto;
		
    }
    .alineacion2{
         margin:auto;
		align-items:center;
		padding: auto;
    }
    .tamana_ancho_1{
    max-width:300px;
    
    }
    .tamana_ancho_2{
    width:500px;
    }
    .tamana_ancho_3{
    width:700px;
    margin-top:10px;
    }
        .tamana_ancho_4{
    width:600px;
    
    }
      .tamana_ancho_5{
    width:400px;
    }
     .tamana_ancho_6{
    width:300px;
    }
       .tamana_ancho_7{
    width:330px;
    }
  
    .tamana_ancho_8{
    min-width:100px;
    }
    .tamana_ancho_9{
   	width:350px;
    }
    .tamana_ancho_10{
   	width:450px;
    }
    .div_contenedor{
    	display:block;
	display:flex;
	margin-left:auto;
	margin-right:auto;
	align-items:center;
	padding: 5px;
    }
    .div_izquierdo{
	margin-left:auto;
	margin-right:5px;
	display:block;
	padding: 10px;
	float:left;
    }
    .div_derecho{
    margin-left:5px;
	margin-right:auto;
	padding: 10px;
	float: right;      
    }
    .texto_centro
    {
     text-align: center;
    }
    
</style>
</h:head>
<h:body style= "background-color: #ecf2f5">
<b:container>
<h:form id = "form_G">
<p:growl id="mensajes" showDetail="true" life="2000" />
	<b:panelGrid  columns="4"  colSpans="6,6" >

		<b:panel title="Parametros" id  = "paraid" look="info" class =  "alineacion tamana_ancho_10">
			<b:container fluid="true"  >
			<b:row style="margin-bottom:10px">
				<b:column span="2">
					<h:outputLabel  value="Nombre: "/>
				</b:column>
				<b:column span="2" offset="2">
					<h:outputLabel  value="#{potencialesAccion.panombrej}"/>
				</b:column>
				<b:column span="1" offset="4">
					<b:commandButton look="info" value="N"
					type="button"
					onclick="PF('paParametrosver').show();"/>
					</b:column>
			</b:row>
				<b:row style="margin-bottom:10px">
					<b:column span="2">
						<h:outputLabel  value="Señal: "/>
					</b:column>
					<b:column span="6" offset="2">
						<p:selectOneMenu id="ondas" value="#{potencialesAccion.idTipoOnda}" >
							<f:selectItem itemLabel="Potenciales" itemValue="0"/>
							<f:selectItems  value="#{potencialesAccion.general}" />
							
						</p:selectOneMenu>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					<b:column span="2">
						<h:outputLabel  value="Frecuencia: "/>
					</b:column>
					<b:column span="2" offset="2">
						<p:inputText id="paferecuenciax" style="text-align: center;" value="#{potencialesAccion.pafrecueciaj}"  placeholder="Hz">
				     		<p:keyFilter regEx="/[\d\-\.]/"/> 
				     		
				        </p:inputText>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					<b:column span="2">
						<h:outputLabel  value="Amplitud: "/>
					</b:column>
					<b:column span="2" offset="2">
						<p:inputText id="pamplitudx" style="text-align: center;" value="#{potencialesAccion.paamplitudj}"  placeholder="Volts">
				     		<p:keyFilter regEx="/[\d\-\.]/"/> 
				     		
				        </p:inputText>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:20px">
					<b:column span="2">
						<h:outputLabel  value="Tiempo: "/>
					</b:column>
					<b:column span="2" offset="2">
						<p:inputText id="ptiempox" style="text-align: center;" value="#{potencialesAccion.patiempoj}"  placeholder="Minutos">
				     		<p:keyFilter regEx="/[\d\-\.]/"/> 
				     		
				        </p:inputText>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					<b:column span="2">
						<h:outputLabel  value="Equipo:  "/>
					</b:column>
					<b:column span="5" offset="2">
						<h:outputLabel  value="#{potencialesAccion.nombre_equipo}"/>
					</b:column>
					<b:column span="1" offset="1">
					<b:commandButton look="info" value="E" type="button"
					actionListener="#{potencialesAccion.cargar_equipos}"
					 			onclick="PF('patablaequipo').show();"/>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					<b:column span="2">
						<h:outputLabel  value="Desprición:  "/>
					</b:column>
					<b:column span="4" offset="2">
					 	<p:inputTextarea id = "padescripcion"  rows="2" cols="20" counter="cont_padescripcion" maxlength="230" 
							counterTemplate="{0} " autoResize="false" value="#{potencialesAccion.padesceipcionj}"    class = "texto_centro"/>			
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					 <b:column span="5" offset="5">
						<h:outputText id="cont_padescripcion"/>
					</b:column>
				</b:row>
				<b:row style="margin-bottom:10px">
					<b:commandButton look="success" value="Crear / Modíficar" type="button"
					onclick="PF('paParametros').show();"/>
				</b:row>
			</b:container>
		</b:panel>
		 <b:panel title="Potencial" look="info" id = "grafica_para" class =  "alineacion tamana_ancho_4">
		    <b:container fluid="true"  >
		    	<b:row style="margin-bottom:10px">
		    		<hf:chart type="line" id = "grafi" value="#{potencialesAccion.valores_g}" 
		    		    title="Tiempo de Estimulo: #{potencialesAccion.patiempoj} minutos" xaxisLabel=" Frecuencia: #{potencialesAccion.pafrecueciaj} Hz" yaxisLabel="Volts"
		    		    >
		     			</hf:chart>
		    	</b:row>
		    </b:container>
		</b:panel>
	</b:panelGrid>
  <!-- Selecciona equipo -->
					<p:dialog header="Seleccione Equipo" widgetVar="patablaequipo" showEffect="explode" hideEffect="bounce" height="300"  modal="true" >
			 			<b:container fluid="true"  >
			 				<b:row  style="margin-bottom:10px" >
				 				<b:column span="2">
									<b:commandButton look="primary" value="cargar"  actionListener="#{potencialesAccion.cargar_equipos}" 
									update="ptableequipo" ></b:commandButton>
								</b:column>
								<b:column span="4" offset= "2">
									<p:inputText id="ebuscador" value="#{potencialesAccion.pabnombreequipov}"   placeholder="Buscar Equipo" style=" text-aling: center;">
					     				<p:ajax event="keyup" update="ptableequipo" listener="#{potencialesAccion.buscar_equipo}" />
					    			</p:inputText>		
								</b:column>
			 				</b:row>
			 				<b:row  style="margin-bottom:10px" >
			 					<p:dataTable class = "tamana_ancho_5" id = "ptableequipo"  paginator="true" rows="5" 
								paginatorTemplate="{PageLinks} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15,20"
								paginatorPosition="bottom" value="#{potencialesAccion.estimuladores}"
								var="esti"  reflow="true" selectionMode="single"  
								selection="#{potencialesAccion.selecion_estimulador}"  rowKey="#{esti.noserie}" 
								>
								<p:ajax event="rowSelect" listener="#{potencialesAccion.asignacion_equipo}"
								update=":form_G:paraid" />
								<p:column headerText="Serie">
							        	<h:outputText value="#{potencialesAccion.convertirserie(esti.noserie)}" />
							    	</p:column>
							    	<p:column headerText="Generación">
							    		<h:outputText value="#{potencialesAccion.convertirgeneracion(esti.noserie)}" />
							    	</p:column>
								</p:dataTable>
			 				</b:row>
						</b:container> 			
					</p:dialog>
<!-- Crear o medificar Parametros -->
			<p:dialog header="Parametros" widgetVar="paParametros" showEffect="explode" hideEffect="bounce" height="100"  modal="true" >
				 	 <b:container fluid="true">
				 	 	<b:row  style="margin-bottom:25px" >
				 	 		<b:column span="2">
				 	 			<p:inputText id="panombre" style="text-align: center;" value="#{potencialesAccion.panombrej1}"  placeholder="Nombre">
				     				 	<p:ajax event="keyup" listener="#{potencialesAccion.padatosj1}" />
				        			</p:inputText>
				 	 		</b:column>
				 	 		
				 	 	</b:row>
				 	 	<b:row  style="margin-bottom:10px" >
				 	 		<b:commandButton look="success" id="pcrea" value="OK" actionListener="#{potencialesAccion.crea_modifa_parametros}"/>
				 	 	</b:row>
				 	 </b:container>
			</p:dialog>
<!-- ver parametros -->	
 			<p:dialog header="Parametros" widgetVar="paParametrosver" showEffect="explode" hideEffect="bounce" height="300"  modal="true" >
 				<b:panelGrid  columns="2" >
 				<b:container fluid="true">
 						<b:row  style="margin-bottom:10px" >
				 				<b:column span="2">
									<b:commandButton look="primary" value="cargar"  actionListener="#{potencialesAccion.cargar_equipos}" 
									update="paraequi"></b:commandButton>
								</b:column>
								<b:column span="6" offset= "2">
									<b:inputText id="paraequibuscador" value="#{potencialesAccion.pabnombreequipov}" placeholder="Buscar Equipo">
									<p:ajax event="keyup" update="paraequi" listener="#{potencialesAccion.buscar_equipo}" ></p:ajax>
									</b:inputText>
									
								</b:column>
			 				</b:row>
 						<b:row  style="margin-bottom:10px" >
 							<p:dataTable class = "tamana_ancho_5" id="paraequi" paginator="true" rows="5" 
								paginatorTemplate="{PageLinks} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15,20" 
								paginatorPosition="bottom" value="#{potencialesAccion.estimuladores}"
								var="parametroe" reflow="true" selectionMode="single"  
								selection="#{potencialesAccion.selecion_estimulador}"  rowKey="#{parametroe.noserie}" >
								<p:ajax event="rowSelect" update=":form_G:ptableparametros" />
							<p:column headerText="Serie">
								<h:outputText value="#{potencialesAccion.convertirserie(parametroe.noserie)}" />
							</p:column>
							<p:column headerText="Equipo">
								<h:outputText value="#{potencialesAccion.convertirgeneracion(parametroe.noserie)}" />
							</p:column>
							</p:dataTable>
 						</b:row>
 						
 					</b:container>
 				<b:container fluid="true">
 					<b:row  style="margin-bottom:10px" >
						<b:column span="2">
							<b:commandButton look="primary" value="cargar"  actionListener="#{potencialesAccion.cargar_parametros}" 
							 update="ptableparametros" ></b:commandButton>
						</b:column>
						<b:column span="6" offset= "2">
							<b:inputText id="pabuscador" value="#{potencialesAccion.pabnombreparametrosv}"   placeholder="Buscar Parametros" style=" text-aling: center;">
						    	<p:ajax event="keyup" update="ptableparametros" listener="#{potencialesAccion.buscar_parametros}" />
							</b:inputText>		
						</b:column>
			 		</b:row>
 					<b:row  style="margin-bottom:10px" >
 						<p:dataTable class = "tamana_ancho_5" id = "ptableparametros"  paginator="true" rows="5" 
						paginatorTemplate="{PageLinks} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15,20"
						paginatorPosition="bottom" value="#{potencialesAccion.parametros_list}"
						var="para"  reflow="true" selectionMode="single"  
						selection="#{potencialesAccion.seleccion_parametro}"  rowKey="#{para.idparametro}" 
						>
						<!--  <p:ajax event="rowSelect" listener="#{potencialesAccion.parametro_elegido_ajax}"
						update=":form_G:grafica_para ,:form_G:paraid, :form_G:ondas, :form_G:panombre" />-->
							
							<p:column headerText="ID">
								<h:outputText value="#{para.idparametro}" />
							</p:column>
				    		<p:column headerText="Nombre">
								<h:outputText value="#{para.nombre}" />
							</p:column>
						</p:dataTable>
 					</b:row>
 				</b:container>
 					
 					</b:panelGrid>
 			</p:dialog> 					  
  </h:form>
  </b:container>
  </h:body>
</html>